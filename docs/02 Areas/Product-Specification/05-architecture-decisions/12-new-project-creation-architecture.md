# ADR-012: New Project Creation Architecture

**Status:** Accepted  
**Date:** 2025-08-10  
**Updated:** 2025-08-11 - GPT-5 Implementation  
**Decision:** Conversational UI with Canvas-Style Brief Editing

## Context

We need to design how users create new research projects in Many Futures. Traditional forms feel bureaucratic for a futures research platform. We want project creation to feel like hiring an expert researcher.

## Decision Drivers

- User types vary (academia, tech, policy, hobbyists)
- Users have varying clarity about their needs
- Editorial Hero design principle (content-first)
- MVP constraints (ship quickly, learn patterns)
- Existing chat UI components available

## Considered Options

### Option 1: Traditional Form
- ❌ Feels bureaucratic
- ❌ Doesn't showcase Futura's intelligence
- ❌ Doesn't build confidence or provide guidance

### Option 2: Pure Chat Interface
- ❌ Brief editing awkward in chat bubbles
- ❌ Unclear when conversation ends
- ❌ Hard to distinguish brief from messages

### Option 3: Conversational + Canvas (Selected)
- ✅ Natural conversation flow
- ✅ Clear document/artifact for brief
- ✅ Reuses chat components
- ✅ Clear editing affordance
- ✅ Maintains focus while allowing refinement

## Decision

Implement a dedicated page (`/projects/new`) with:

1. **Conversation Phase**: Chat-like interface for exploration
2. **Brief Generation**: Futura creates structured brief
3. **Canvas Presentation**: Brief appears as editable document (not message)
4. **Inline Editing**: Click to edit directly in canvas
5. **Clear Completion**: Confirm button creates project

## Technical Approach

### State Machine
```typescript
type ConversationState = 
  | 'opening'
  | 'exploring' 
  | 'converging'
  | 'brief_generated'
  | 'editing'
  | 'complete';
```

### Brief Structure
```typescript
interface ProjectBrief {
  title: string;           // Auto-generated by Futura
  brief: string;           // Natural language research brief
  // Stored as JSONB in projects.onboarding_brief
  // Simple and flexible for any type of exploration
}
```

### Component Architecture
```
/projects/new
  ├── NewProjectConversation.tsx    // Main container
  ├── ConversationFlow.tsx           // Chat interface
  ├── BriefCanvas.tsx                // Editable brief display
  └── useProjectCreation.ts          // State management
```

## Implementation Notes

### ~~MVP Simplifications~~ Production Implementation
- ~~Fake Futura responses using keyword matching~~ **GPT-5 with Responses API**
- No conversation persistence between sessions
- Single brief generation (no alternatives)
- Text-only editing (no rich formatting)
- No draft saving
- Natural language brief without structured fields

### GPT-5 Integration Details
- **API:** OpenAI Responses API (`/v1/responses`)
- **Model:** `gpt-5-mini` for cost-effective performance
- **Configuration:**
  ```javascript
  {
    model: "gpt-5-mini",
    reasoning: { effort: "minimal" },
    text: { verbosity: "low" },
    instructions: SYSTEM_PROMPT,
    input: conversationHistory
  }
  ```
- **Two-Phase Approach:**
  1. Conversation phase (exploration with turn tracking)
  2. Brief generation phase (synthesis with structured prompt)

### Reusable Components
- Use existing prompt-kit components from ChatPanelNew
- Leverage Message and PromptInput components
- Apply consistent styling with chat panel

### Conversation Rules (Updated with First Principles)
- Minimum 2 turns (even for specific requests)
- Maximum 5-6 turns before strong convergence
- Always offer "continue shaping" option
- Graceful handling of edge cases
- **Synthesis over clarification:** When user says "all of it", synthesize full scope
- **Phase-based progress:** Discovery → Scoping → Convergence (not rigid turn counting)
- **State tracking:** Maintain conversation phase in server state
- **Voice consistency:** Collaborative explorer, no consultant jargon
- **Intent detection:** Understand user needs, not exact phrases
- **Pattern handling:** Detect repetitive, hostile, confused behaviors

### Brief Generation
- Futura synthesizes conversation into readable paragraph
- Includes what will be researched and tracked
- Natural language that user can understand and edit
- Agent handles extraction of constraints/scope later

## Consequences

### Positive
- Differentiates from traditional tools
- Builds user confidence through expert guidance
- Learn conversation patterns before production
- Reuses existing components
- Creates engaging onboarding experience

### Negative
- More complex than simple form
- Conversation quality depends on prompt engineering
- Edge cases need careful handling
- Requires thoughtful content/copy writing

## Security Considerations

- Input sanitization for user responses
- Rate limiting on project creation
- Jailbreak detection and handling
- NSFW content filtering
- Scope boundary enforcement

## Future Considerations

- **Conversation Memory**: Remember context across sessions
- **Multiple Drafts**: Generate alternative briefs
- **Voice Modulation**: Industry-specific tone
- **Collaborative Creation**: Multiple users shaping brief
- **Templates**: Pre-filled conversations for common use cases
- **Learning Loop**: Improve suggestions based on successful projects

## Related Documents

- PRD: New Project Conversational UI (`06-site-architecture/04-new-project-conversational-ui-prd.md`)
- Futura Voice & Purpose (`02-editorial-framework/04-futura-voice-and-purpose.md`)
- New Project Conversational UI PRD (`06-site-architecture/04-new-project-conversational-ui-prd.md`)